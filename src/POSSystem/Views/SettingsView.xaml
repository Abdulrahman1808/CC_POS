<UserControl x:Class="POSSystem.Views.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="#111827">
    
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="30">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="30"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- Left Column - Store Info -->
            <StackPanel Grid.Column="0">
                <StackPanel Orientation="Horizontal" Margin="0,0,0,25">
                    <Button Content="â† Back" 
                            Command="{Binding BackToDashboardCommand}"
                            Background="#374151" Foreground="White"
                            FontSize="13" Padding="12,8" Margin="0,0,15,0" Cursor="Hand">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" CornerRadius="6" Padding="{TemplateBinding Padding}">
                                    <ContentPresenter HorizontalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <TextBlock Text="Store Settings" FontSize="24" FontWeight="Bold" 
                               Foreground="#F9FAFB" VerticalAlignment="Center"/>
                </StackPanel>
                
                <!-- Logo Section -->
                <Border Background="#1F2937" CornerRadius="12" Padding="20" Margin="0,0,0,20">
                    <StackPanel>
                        <TextBlock Text="Store Logo" Foreground="#F9FAFB" 
                                   FontSize="16" FontWeight="SemiBold" Margin="0,0,0,15"/>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- Logo Preview -->
                            <Border Grid.Column="0" Background="#374151" CornerRadius="8" 
                                    Width="80" Height="80">
                                <Image Source="{Binding LogoPath}" Stretch="Uniform" Margin="5"/>
                            </Border>
                            
                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                <Button Content="Browse..." 
                                        Command="{Binding BrowseLogoCommand}"
                                        Background="#3B82F6" Foreground="White"
                                        Padding="15,10" Cursor="Hand" HorizontalAlignment="Left">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" 
                                                    CornerRadius="6" Padding="{TemplateBinding Padding}">
                                                <ContentPresenter/>
                                            </Border>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                                <TextBlock Text="PNG, JPG (200x200 recommended)" 
                                           Foreground="#9CA3AF" FontSize="12" Margin="0,8,0,0"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>
                
                <!-- Store Information -->
                <Border Background="#1F2937" CornerRadius="12" Padding="20" Margin="0,0,0,20">
                    <StackPanel>
                        <TextBlock Text="Store Information" Foreground="#F9FAFB" 
                                   FontSize="16" FontWeight="SemiBold" Margin="0,0,0,15"/>
                        
                        <TextBlock Text="Store Name" Foreground="#9CA3AF" FontSize="13" Margin="0,0,0,5"/>
                        <TextBox Text="{Binding StoreName, UpdateSourceTrigger=PropertyChanged}"
                                 Background="#374151" Foreground="#F9FAFB" FontSize="14"
                                 Padding="12,10" Margin="0,0,0,15"/>
                        
                        <TextBlock Text="Address" Foreground="#9CA3AF" FontSize="13" Margin="0,0,0,5"/>
                        <TextBox Text="{Binding Address, UpdateSourceTrigger=PropertyChanged}"
                                 Background="#374151" Foreground="#F9FAFB" FontSize="14"
                                 Padding="12,10" TextWrapping="Wrap" Height="60"
                                 AcceptsReturn="True" Margin="0,0,0,15"/>
                        
                        <Grid Margin="0,0,0,15">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="15"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Phone Number" Foreground="#9CA3AF" FontSize="13" Margin="0,0,0,5"/>
                                <TextBox Text="{Binding PhoneNumber, UpdateSourceTrigger=PropertyChanged}"
                                         Background="#374151" Foreground="#F9FAFB" FontSize="14" Padding="12,10"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Email" Foreground="#9CA3AF" FontSize="13" Margin="0,0,0,5"/>
                                <TextBox Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}"
                                         Background="#374151" Foreground="#F9FAFB" FontSize="14" Padding="12,10"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>
                
                <!-- Tax & Currency -->
                <Border Background="#1F2937" CornerRadius="12" Padding="20">
                    <StackPanel>
                        <TextBlock Text="Tax &amp; Currency" Foreground="#F9FAFB" 
                                   FontSize="16" FontWeight="SemiBold" Margin="0,0,0,15"/>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="15"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Default Tax Rate (%)" Foreground="#9CA3AF" FontSize="13" Margin="0,0,0,5"/>
                                <TextBox Text="{Binding DefaultTaxRate, UpdateSourceTrigger=PropertyChanged, StringFormat=P0}"
                                         Background="#374151" Foreground="#F9FAFB" FontSize="14" Padding="12,10"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Currency Symbol" Foreground="#9CA3AF" FontSize="13" Margin="0,0,0,5"/>
                                <TextBox Text="{Binding CurrencySymbol, UpdateSourceTrigger=PropertyChanged}"
                                         Background="#374151" Foreground="#F9FAFB" FontSize="14" Padding="12,10"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>
            </StackPanel>
            
            <!-- Right Column - Receipt Settings -->
            <StackPanel Grid.Column="2">
                <TextBlock Text="Receipt Settings" FontSize="24" FontWeight="Bold" 
                           Foreground="#F9FAFB" Margin="0,0,0,25"/>
                
                <Border Background="#1F2937" CornerRadius="12" Padding="20" Margin="0,0,0,20">
                    <StackPanel>
                        <TextBlock Text="Receipt Footer Message" Foreground="#9CA3AF" FontSize="13" Margin="0,0,0,5"/>
                        <TextBox Text="{Binding ReceiptFooter, UpdateSourceTrigger=PropertyChanged}"
                                 Background="#374151" Foreground="#F9FAFB" FontSize="14"
                                 Padding="12,10" TextWrapping="Wrap" Height="80"
                                 AcceptsReturn="True"/>
                    </StackPanel>
                </Border>
                
                <!-- Preview Button -->
                <Button Content="ðŸ‘ Preview Receipt" 
                        Command="{Binding PreviewReceiptCommand}"
                        Background="#374151" Foreground="#F9FAFB"
                        FontSize="14" Padding="0,15" Cursor="Hand" Margin="0,0,0,20">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" 
                                    CornerRadius="8" Padding="{TemplateBinding Padding}">
                                <ContentPresenter HorizontalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                
                <!-- Save Button -->
                <Button Content="ðŸ’¾ Save Settings" 
                        Command="{Binding SaveSettingsCommand}"
                        Background="#10B981" Foreground="White"
                        FontSize="16" FontWeight="SemiBold" Padding="0,18" Cursor="Hand">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" 
                                    CornerRadius="8" Padding="{TemplateBinding Padding}">
                                <ContentPresenter HorizontalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                
                <!-- Status Message -->
                <TextBlock Text="{Binding StatusMessage}" 
                           Foreground="#10B981" FontSize="14"
                           HorizontalAlignment="Center" Margin="0,15,0,0"/>
                
                <!-- Danger Zone - Clear Transactions -->
                <Border Background="#1F2937" CornerRadius="12" Padding="20" Margin="0,30,0,0"
                        BorderBrush="#DC2626" BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="âš ï¸ Danger Zone" Foreground="#DC2626" 
                                   FontSize="18" FontWeight="Bold" Margin="0,0,0,15"/>
                        
                        <Grid Margin="0,0,0,15">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Total Transactions" Foreground="#9CA3AF" FontSize="12"/>
                                <TextBlock Text="{Binding TransactionCount}" Foreground="#F9FAFB" 
                                           FontSize="28" FontWeight="Bold"/>
                            </StackPanel>
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="Today's Sales" Foreground="#9CA3AF" FontSize="12"/>
                                <TextBlock Text="{Binding TodaysSales, StringFormat='E {0:N2}'}" Foreground="#10B981" 
                                           FontSize="28" FontWeight="Bold"/>
                            </StackPanel>
                        </Grid>
                        
                        <TextBlock Text="Admin Email (required for notification)" 
                                   Foreground="#9CA3AF" FontSize="12" Margin="0,10,0,5"/>
                        <TextBox Text="{Binding AdminEmail, UpdateSourceTrigger=PropertyChanged}"
                                 Background="#374151" Foreground="#F9FAFB" FontSize="14"
                                 Padding="12,10" Margin="0,0,0,15"/>
                        
                        <Button Content="ðŸ—‘ï¸ Clear All Transactions" 
                                Command="{Binding ClearTransactionsCommand}"
                                Background="#DC2626" Foreground="White"
                                FontSize="14" FontWeight="SemiBold" Padding="0,14" Cursor="Hand">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" 
                                            CornerRadius="8" Padding="{TemplateBinding Padding}">
                                        <ContentPresenter HorizontalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                        
                        <TextBlock Text="This will permanently delete ALL transactions and reset the counter to 0." 
                                   Foreground="#F87171" FontSize="12" TextWrapping="Wrap"
                                   HorizontalAlignment="Center" Margin="0,10,0,0"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Grid>
    </ScrollViewer>
</UserControl>
